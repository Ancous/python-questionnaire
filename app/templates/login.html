<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Вход</title>
    <link
        rel="icon"
        href="../static/images/favicon.jpg"
        type="image/svg+xml">
</head>
<header>
    <div>
        <h1>
            Вопросики к собеседованию на Python
        </h1>
    </div>
</header>
<body>
<h2>
    Войти
</h2>
<div>
    <button onclick="window.location.href='{{ url_for('main.main') }}'">
        Вернуться на главную
    </button>
</div>
<div>
    <form method="post">
        {{ form.hidden_tag() }}
        <p>
            {{ form.username.label }}
            <br>
            {{ form.username(class="validate") }}
            {% for error in form.username.errors %}
            <span class="error-message" style="color: red;">{{ error }}</span>
            {% endfor %}
        </p>
        <p>
            {{ form.password.label }}
            <br>
            {{ form.password(class="validate") }}
            {% for error in form.username.errors %}
            <span class="error-message" style="color: red;">{{ error }}</span>
            {% endfor %}
        </p>
        <p>
            {{ form.submit() }}
        </p>
    </form>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('input.validate').forEach(function(input) {
            input.addEventListener('input', function() {
                // Получаем родительский <p> и все error-message внутри него
                let p = input.closest('p');
                if (!p) return;
                let errors = p.querySelectorAll('.error-message');
                if (input.value.trim() !== '') {
                    errors.forEach(span => span.style.display = 'none');
                } else {
                    errors.forEach(span => span.style.display = 'inline');
                }
            });
        });
    });
</script>
</body>
<footer>
    <div>
        <h2>
            Здесь будет информация
        </h2>
    </div>
</footer>
</html>
