## <u>Кратко</u>

Исправление Monkey (Monkey Patching) — это техника в Python, позволяющая изменять или расширять поведение классов или
модулей в процессе выполнения программы, без необходимости изменять исходный код. Это может быть полезно для
исправления ошибок, добавления новых функций или изменения поведения сторонних библиотек.

## <u>Развернуто</u>

Monkey Patching позволяет вносить изменения в существующие классы или функции во время выполнения программы. Это
достигается путем замены или добавления методов и атрибутов. Хотя эта техника может быть мощной, она также может
привести к трудностям с отладкой и поддержкой кода, так как изменения могут быть неочевидны для других разработчиков.

1. **Основные моменты Monkey Patching**
    - **Изменение поведения**: Вы можете изменить поведение существующих методов без изменения их исходного кода.
    - **Использование в тестировании**: Часто используется в юнит-тестах для замены функций на заглушки (mock).
    - **Риск**: Monkey Patching может сделать код сложным для понимания и сопровождения, так как изменения происходят
      динамически.

2. **Пример использования Monkey Patching**
    - Рассмотрим простой пример, где мы изменяем метод класса Dog, чтобы он издавал другой звук:
    ```Python
    class Dog:
        def bark(self):
            return "Woof!"

    # Создаем экземпляр класса Dog
    my_dog = Dog()
    print(my_dog.bark())  # Вывод: Woof!

    # Функция, которую мы хотим использовать для замены
    def new_bark(self):
        return "Meow!"

    # Применяем Monkey Patching
    Dog.bark = new_bark

    # Проверяем, как изменилось поведение
    print(my_dog.bark())  # Вывод: Meow!
    ```
    - Мы создаем класс Dog с методом bark, который возвращает "Woof!".
    - Затем мы определяем новую функцию new_bark, которая возвращает "Meow!".
    - С помощью Monkey Patching мы заменяем метод bark в классе Dog на new_bark.
    - После этого, вызов my_dog.bark() возвращает "Meow!", что демонстрирует измененное поведение.

3. **Контекст использования**
    - Monkey Patching может быть полезным в следующих ситуациях:
        - Исправление ошибок в сторонних библиотеках, когда нет возможности изменить исходный код.
        - Добавление или изменение функций в библиотеках, которые Вы не контролируете.
        - Создание тестов, которые требуют изменения поведения объектов.

4. **Пример использования**
    ```Python
    # Исходный класс
    class Calculator:
        def add(self, a, b):
            return a + b

    # Создаем экземпляр класса
    calc = Calculator()
    print(calc.add(2, 3))  # Вывод: 5

    # Новый метод для изменения поведения
    def new_add(self, a, b):
        return a * b  # Изменяем сложение на умножение

    # Применяем Monkey Patching
    Calculator.add = new_add

    # Проверяем измененное поведение
    print(calc.add(2, 3))  # Вывод: 6
    ```
    - В этом примере мы изменили метод add класса Calculator с операции сложения на операцию умножения, используя
      технику Monkey Patching.

<div align="right">

[Вернуться к вопросам](../Вопросы.md)

</div>
