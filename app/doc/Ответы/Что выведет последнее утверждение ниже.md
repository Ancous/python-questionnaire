## <u>Кратко</u>

Последнее утверждение выведет список `[2, 2, 2]`, так как все лямбда-функции ссылаются на одну переменную `i`, значение
которой после цикла равно 2.

## <u>Развернуто</u>

В Python лямбда-функции замыкают переменные из внешней области видимости, а не их текущие значения во время создания. В
данном коде переменная `i` изменяется в цикле, и все функции в списке `flist` ссылаются на одну и ту же переменную.

1. **Подробности работы замыканий**
    - При создании лямбда-функций переменная `i` не фиксируется, а используется по ссылке.
    - После окончания цикла `i` имеет значение `2` (последнее значение из `range(3)`).
    - Все вызовы функций возвращают текущее значение `i`.

2. **Почему все функции возвращают одинаковое значение**
    - Лямбды используют значение `i` во время вызова, а не во время создания.
    - Чтобы сохранить текущее значение `i` для каждой функции, нужно использовать аргумент по умолчанию.

3. **Преимущества и недостатки поведения**
    - **Преимущества:**
        - Позволяет создавать динамические функции с доступом к внешнему состоянию.
    - **Недостатки:**
        - Без внимательного подхода может приводить к неожиданному поведению и ошибкам.

4. **Контекст использования**
    - Важно при работе с замыканиями и генерацией функций в циклах.

5. **Пример исправления:**
    ```python
    flist = []
    for i in range(3):
        flist.append(lambda i=i: i)  # Использование аргумента по умолчанию

    print([f() for f in flist])  # Вывод: [0, 1, 2]
    ```

Таким образом, исходный код создаёт три лямбда-функции, все возвращающие последнее значение переменной цикла — `2`,
поэтому вывод будет `[2, 2, 2]`. Использование аргументов по умолчанию помогает сохранить отдельные значения при
создании функций.

<div align="right">

[Вернуться к вопросам](../Вопросы.md)

</div>
