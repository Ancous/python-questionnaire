### Кратко

В Python ключом в словаре может быть любой неизменяемый (hashable) объект, например, число, строка, кортеж или объект
собственного класса с реализованными методами `__hash__` и `__eq__`. Изменяемые объекты, такие как списки или словари,
не могут быть ключами.

### Развернуто

В Python словарь (dict) — это коллекция пар ключ-значение, в которой каждому ключу соответствует одно значение. Ключи
подчиняются определённым правилам:

1. **Ключ должен быть хэшируемым (hashable)**
    - Ключ должен иметь неизменяемое (immutable) состояние, чтобы его хеш не менялся за время жизни, пока ключ
      находится в словаре.
    - Объект считается хэшируемым, если реализует методы `__hash__()` и `__eq__()` и его хеш не меняется.

2. **Примеры допустимых ключей**
    - Строка (str)
    - Целое (int)
    - Вещественное число (float)
    - Кортеж (tuple), если все его элементы тоже хэшируемы
    - Булевы значения (True, False)
    - frozenset
    - Объекты собственного класса, если реализованы `__hash__()` и `__eq__()`
    ```python
    d = {
        10: "число",
        "ключ": "строка",
        (1, 2): "кортеж"
    }
    ```

3. **Примеры недопустимых ключей**
    - Список (list)
    - Словарь (dict)
    - Множество (set)
    - Кортежи, содержащие изменяемые объекты
    ```python
    my_list = [1, 2, 3]
    d = {}

    # d[my_list] = "ошибка"  # TypeError: unhashable type: 'list'
    ```

4. **Пользовательские объекты в качестве ключей**
    - Можно создавать свои классы, экземпляры которых будут ключами, если правильно реализованы методы `__hash__`
      и `__eq__`:
    ```python
    class MyKey:
        def __hash__(self):
            return 42  # Примерная реализация
        def __eq__(self, other):
            return isinstance(other, MyKey)

    d = {MyKey(): "значение"}
    ```

5. **Изменяемость и безопасность**
    - Если использовать изменяемые объекты в качестве ключа, хеш их значения может измениться, что приведёт к
      непредсказуемому поведению и ошибкам поиска в словаре.

6. **Проверка объекта на хэшируемость**
    - Чтобы проверить, можно ли использовать объект в качестве ключа, можно попытаться получить его хеш:
    ```python
    hash((1, 2, 3))      # Работает

    # hash([1, 2, 3])    # Ошибка
    ```

В Python ключ словаря — это любой объект с неизменяемым состоянием и определённой функцией хеширования. Чаще всего это
строки, числа и кортежи, не содержащие изменяемых элементов. Попытка использовать изменяемый объект (например, список)
в качестве ключа вызовет ошибку.

<div align="right">

[Вернуться к вопросам](../Вопросы.md)

</div>
