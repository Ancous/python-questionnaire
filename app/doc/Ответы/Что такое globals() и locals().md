### Кратко

globals() и locals() в Python — это встроенные функции, возвращающие словари с глобальными и локальными переменными
соответственно. Они позволяют получить доступ к текущим областям видимости во время выполнения программы.

### Развернуто

В Python каждой переменной или функции соответствует определённая область видимости: глобальная (уровень модуля) или
локальная (внутри функции). Для работы с этими областями используются функции globals() и locals().

1. **globals()**
    - globals() возвращает словарь, содержащий все глобальные переменные текущего модуля (например, функции, переменные,
      импортированные модули), включая встроенные объекты.
    ```python
    x = 5

    def test():
        print(globals()["x"])  # Выведет 5

    test()
    ``` 
    - Используется для чтения и изменения глобальных переменных из любого места программы.
    - Изменения, внесённые в этот словарь, отразятся на глобальных переменных.

2. **locals()**
    - locals() возвращает словарь с локальными переменными для текущей области видимости:
    ```python
    def foo():
        a = 10
        b = 20
        print(locals())  # {'a': 10, 'b': 20}

    foo()
    ``` 
    - Если вызвать внутри функции — вернёт локальные переменные этой функции.
    - Если вызвать на уровне модуля — вернёт то же, что и globals().
    
    - Особенности:
        - В случае изменения значений в словаре, возвращённом locals(), изменения в локальных переменных не всегда
          гарантируются (особенно внутри функций).
        - Словари, возвращаемые globals() и locals(), могут вести себя по-разному в зависимости от контекста вызова.

3. **Примеры использования**
    - Доступ к переменным по строке:
    ```python
    var_name = "result"
    result = 42
    print(globals()[var_name])  # 42
    ```
    - Динамическое создание переменных (не рекомендуется):
    ```python
    for i in range(3):
        locals()[f"var_{i}"] = i  # НЕ гарантировано, что переменные появятся
    print(locals())  # Может не содержать var_0, var_1, var_2
    ```

4. **Контекст использования**
    - Отладки (вывода текущих значений переменных);
    - Динамического доступа или изменения переменных по имени;
    - В сложных случаях метапрограммирования, например если имя переменной формируется динамически.

5. **Предостережения**
    - Изменять содержимое locals() внутри функций не рекомендуется — результат зависит от реализации Python.
    - Для обычных задач стоит использовать обычный доступ к переменным по имени, обращаться к этим функциям стоит
      только при действительно необходимой динамике.

globals() и locals() — мощные инструменты Python, которые открывают доступ к различным областям видимости, их следует
использовать с осторожностью и обычно только там, где стандартных средств недостаточно.

<div align="right">

[Вернуться к вопросам](../Вопросы.md)

</div>
