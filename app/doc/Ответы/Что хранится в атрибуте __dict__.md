### Кратко

В атрибуте `__dict__` экземпляра или класса в Python хранится словарь, содержащий все его изменяемые атрибуты и их
значения. Это основной способ хранения данных объекта, используемый интерпретатором для быстрого доступа к атрибутам.

### Развернуто

В Python у каждого объекта, класса и экземпляра (если это разрешено типом), есть специальный атрибут `__dict__`. Он
представляет собой встроенный словарь, где ключами являются имена атрибутов объекта (строки),
а значениями — соответствующие значения этих атрибутов.

1. **Зачем нужен `__dict__`**
    
    - Динамическое хранение атрибутов:
      
      Когда мы добавляем к объекту или классу атрибуты во время выполнения, они сохраняются именно в этом словаре.
    
    - Отражение текущего состояния:
      
      `__dict__` всегда отражает актуальное состояние всех доступных (и изменяемых) атрибутов объекта.

2. **Примеры использования**
    
    - Экземпляр класса
      
      ```python
      class Person:
          def __init__(self, name):
              self.name = name
              self.age = 30

      p = Person("Alice")
      p.city = "Moscow"

      print(p.__dict__)
      # {'name': 'Alice', 'age': 30, 'city': 'Moscow'}
      ```
    
    - Класс
      
      ```python
      class Point:
          default_z = 0

      print(Point.__dict__)
      # {..., 'default_z': 0, ...} # Плюс много служебных атрибутов
      ```

3. **Свойства и особенности**
    
    - Содержит только те атрибуты, которые явно установлены у объекта.
    - Атрибуты, унаследованные от класса, не будут в `__dict__` экземпляра, пока не переопределены.
    - У некоторых встроенных типов объектов (например, у int, str, tuple) `__dict__` отсутствует, так как они не
      допускают динамического добавления атрибутов.
    - Если в классе используется `__slots__`, у его экземпляров `__dict__` может отсутствовать.

4. **Практическое применение**
    
    - Простая сериализация:
      
      Удобно использовать при конвертации объектов в JSON или другие форматы хранения:
      
      ```python
      import json
      print(json.dumps(p.__dict__))
      ```
    
    - Динамическая инспекция:
      
      Можно узнать все атрибуты объекта во время отладки.

5. **Дополнительные детали**
    
    - Обновление `__dict__` напрямую меняет соответствующие атрибуты объекта:
      
      ```python
      p.__dict__["country"] = "Russia"
      print(p.country)  # Russia
      ```
    
    - Однако желательно изменять атрибуты через обычное присваивание, чтобы не запутать поведение своего кода.

Атрибут `__dict__` — это внутренний словарь, в котором хранятся все изменяемые атрибуты объектов и классов в Python
(если они допускают динамические атрибуты). Его удобно использовать для инспекции, сериализации и метапрограммирования,
однако обращаться к нему напрямую следует аккуратно.

<div align="right">

[Вернуться к вопросам](../Вопросы.md)

</div>
