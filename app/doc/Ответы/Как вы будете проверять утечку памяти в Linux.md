## <u>Кратко</u>

Для проверки утечки памяти в Linux используют инструменты профилирования и мониторинга, такие как `top`, `htop`,
`valgrind`, `ps`, а также анализ логов и специализированные утилиты для Python, например, `tracemalloc` и
`memory_profiler`.

## <u>Развернуто</u>

Утечка памяти — ситуация, когда программа постепенно потребляет всё больше памяти, не освобождая её, что может привести
к замедлению и даже сбоям.

1. **Системные утилиты для мониторинга**
    - `top` и `htop` — отображают текущие процессы и их использование ресурсов (CPU, память). Помогают отследить рост
      потребления памяти.
    - `ps aux --sort=-rss` — показывает процессы с сортировкой по потребляемой памяти.
    - `free -m` — отображает общее состояние памяти в системе.

2. **Инструменты для поиска утечек**
    - **Valgrind (memcheck)** — мощный инструмент для обнаружения утечек и ошибок управления памятью в нативных
      исполняемых файлах.
    ```bash
    valgrind --leak-check=full ./your_program
    ```  
    - **Massif (профилирование памяти)** — инструмент из состава Valgrind для анализа использования памяти.

3. **Инструменты для Python**
    - Модуль `tracemalloc` — позволяет отслеживать распределение памяти внутри Python и выявлять утечки.
    - Профилировщик `memory_profiler` — показывает использование памяти по строкам кода.
    - Использование `objgraph` для визуализации графа объектов.

4. **Преимущества и недостатки**
    - **Преимущества:**
        - Позволяют быстро выявлять утечки и узкие места с памятью.
        - Обеспечивают глубокий анализ на уровне ОС и приложения.
    - **Недостатки:**
        - Valgrind и аналогичные инструменты замедляют выполнение.
        - Требуют определённых знаний для интерпретации результатов.

5. **Контекст использования**
    - Разработка и отладка приложений, требующих стабильности и эффективности.
    - Анализ работы систем в продакшене для предотвращения аварийных ситуаций.

6. **Пример запуска `tracemalloc` в Python:**
    ```python
    import tracemalloc

    tracemalloc.start()

    # Ваш код здесь

    snapshot = tracemalloc.take_snapshot()
    top_stats = snapshot.statistics('lineno')

    for stat in top_stats[:10]:
        print(stat)
    ```

Таким образом, проверка утечки памяти в Linux осуществляется с помощью системных утилит, специализированных инструментов
и встроенных средств Python, что позволяет эффективно выявлять и устранять проблемы с памятью.

<div align="right">

[Вернуться к вопросам](../Вопросы.md)

</div>
